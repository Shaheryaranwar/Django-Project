{% extends "vege/base.html" %} {% load static %} {% block title %}Students |
RecipeApp{% endblock %} {% block content %}
<h2 class="section-title">Student Details</h2>

<!-- 🔎 Search Form -->
<form method="get" class="mb-3 d-flex">
  <input
    type="text"
    name="q"
    value="{{ query|default:'' }}"
    class="form-control me-2"
    placeholder="Search students..."
  />
  <button type="submit" class="btn btn-primary">Search</button>
</form>

<!-- ➕ Add Student Button -->
<div class="mb-3">
  <a href="{% url 'vege:student_add' %}" class="btn btn-success">Add Student</a>
</div>

<div class="content-container">
  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Student Image</th>
          <th>Student ID</th>
          <th>Student Name</th>
          <th>Student Email</th>
          <th>Department</th>
          <th>Age</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for student in page_obj %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>
            {% if student.student_image %}
            <img
              src="{{ student.student_image.url }}"
              alt="{{ student.student_name }}"
              width="60"
              height="60"
              class="rounded-circle"
            />
            {% else %}
            <div
              class="bg-secondary rounded-circle d-flex align-items-center justify-content-center"
              style="width: 60px; height: 60px"
            >
              No picture
            </div>
            {% endif %}
          </td>
          <td>
            <a
              href="{% url 'vege:see_marks' student.student_id %}"
              class="text-decoration-none fw-bold"
            >
              {{ student.student_id }}
            </a>
          </td>
          <td>{{ student.student_name }}</td>
          <td>{{ student.student_email }}</td>
          <td>{{ student.department.department }}</td>
          <td>{{ student.student_age }}</td>
          <td>
            <a
              href="{% url 'vege:student_edit' student.id %}"
              class="btn btn-warning btn-sm"
              >Edit</a
            >
            <a
              href="{% url 'vege:student_delete' student.id %}"
              class="btn btn-danger btn-sm"
              >Delete</a
            >
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center">No students found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<div class="content-container">
  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Student Image</th>
          <th>Student ID</th>
          <th>Student Name</th>
          <th>Student Email</th>
          <th>Department</th>
          <th>Age</th>
          <th>Actions</th>
          <!-- ✅ New Column -->
        </tr>
      </thead>
      <tbody>
        {% for student in page_obj %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>
            {% if student.student_image %}
            <img
              src="{{ student.student_image.url }}"
              alt="{{ student.student_name }}"
              width="60"
              height="60"
              class="rounded-circle"
            />
            {% else %} No picture {% endif %}
          </td>
          <td>{{ student.student_id }}</td>
          <td>{{ student.student_name }}</td>
          <td>{{ student.student_email }}</td>
          <td>{{ student.department.department }}</td>
          <td>{{ student.student_age }}</td>

          <!-- ✅ Action Buttons -->
          <td>
            <a
              href="{% url 'vege:student_edit' student.id %}"
              class="btn btn-sm btn-primary"
              >Edit</a
            >
            <a
              href="{% url 'vege:student_delete' student.id %}"
              class="btn btn-sm btn-danger"
              onclick="return confirm('Are you sure you want to delete this student?');"
            >
              Delete
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center">No students found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- ✅ Pagination -->
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?q={{ query }}&page=1">&laquo; First</a>
      </li>
      <li class="page-item">
        <a
          class="page-link"
          href="?q={{ query }}&page={{ page_obj.previous_page_number }}"
          >Previous</a
        >
      </li>
      {% endif %}

      <li class="page-item disabled">
        <span class="page-link">
          Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </span>
      </li>

      {% if page_obj.has_next %}
      <li class="page-item">
        <a
          class="page-link"
          href="?q={{ query }}&page={{ page_obj.next_page_number }}"
          >Next</a
        >
      </li>
      <li class="page-item">
        <a
          class="page-link"
          href="?q={{ query }}&page={{ page_obj.paginator.num_pages }}"
          >Last &raquo;</a
        >
      </li>
      {% endif %}
    </ul>
  </nav>
</div>
{% endblock %}
